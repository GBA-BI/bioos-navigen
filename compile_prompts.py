import os

def compile_prompts():
    output_file = "GEMINI.md"
    source_dir = "system_prompt"

    # Files to include in order. If not specified, we'll use alphabetical order.
    # We exclude 00_main.md if we want to provide a custom header, or include it.
    # Looking at current GEMINI.md, it seems 00_main.md is partially there but modified.
    # For restoration, we will concatenate all files alphabetically.

    files = sorted([f for f in os.listdir(source_dir) if f.endswith(".md")])

    with open(output_file, "w", encoding="utf-8") as outfile:
        # Add a header indicating auto-generation
        outfile.write("<!-- This file is auto-generated by compile_prompts.py. DO NOT EDIT DIRECTLY. -->\n\n")

        for filename in files:
            filepath = os.path.join(source_dir, filename)
            with open(filepath, "r", encoding="utf-8") as infile:
                outfile.write(f"<!-- Source: {filename} -->\n")
                outfile.write(infile.read())
                outfile.write("\n\n")

    print(f"Successfully compiled {len(files)} files into {output_file}")

if __name__ == "__main__":
    compile_prompts()
